---
layout: post
title:  "[Algorithm] 2. 구간 합"

categories: Algorithm
---

<br>

## 구간 합?

<br>

### 구간 1~3의 합을 구하기

<br>

| Index | 0 | 1 | 2 | 3 | 4 |
|---|---|---|---|---|---|
|value| 7 | 3 | 1 | 2 | 4 |

<br>

위와 같은 배열이 존재할 때, 1 ~ 3 범위의 구간 합은

```java
// ...

int[] arr = {7, 3, 1, 2, 4};
int sum = 0;

for(int i = 1; i < 3; i++) {
    sum += arr[i];
}

// ...
```

시간 복잡도는 $n-m$ = $O(N)$으로 소요 시간이 크지 않아 보입니다.

하지만 합을 반복적으로 구해야하는 상황(반복 수행, 같은 구간의 합 계산)이면, 수행시간은 커질 수 있습니다. 

구간 합을 이용하면, 시간 복잡도를 $O(1)$로 줄일 수 있습니다.

<br>

### 구간 합의 정의

<br>

구간 합은 합 배열을 활용하면 시간 복잡도를 줄일 수 있습니다.

일반적인 배열의 구간의 합은 반복문으로 단순히 구할 수 있습니다.

<br>

아래와 같은 배열이 있다고 가정합니다.
<br>

| Index | 0 | 1 | 2 | 3 | 4 | 5 |
|---|---|---|---|---|---|---|
|value| 7 | 3 | 1 | 2 | 4 | 9 |

<br>

합 배열은 다음과 같은 방식으로 계산합니다.

<br>

$Sum_{i} = Arr_{0} + Arr_{1} + \cdots + Arr_{i-1} + Arr_{i}$

$= Sum_{i-1} + Arr_{i}$ 

<br>

인덱스에 해당하는 배열 값은 0 ~ 현재 인덱스까지의 모든 합이 됩니다.

이를 바탕으로 합 배열을 구하면

<br>

##### Arr

| Index | 0 | 1 | 2 | 3 | 4 | 5 |
|---|---|---|---|---|---|---|
|value| 7 | 3 | 1 | 2 | 4 | 9 |

##### Sum

| Index | 0 | 1 | 2 | 3 | 4 | 5 |
|---|---|---|---|---|---|---|
|value| 7 | 10 | 11 | 13 | 17 | 26 |

<br>

위의 합 배열을 이용하여 i에서 j까지의 구간 합을 쉽게 구할 수 있습니다.

<br>

$Sum_{i,j} = Sum{j} - Sum{i-1}$

<br>

예를 들어, 1 ~ 3의 범위의 구간 합을 구할 때

<br>

##### 일반 반복문을 이용한 구간 합 계산

$Arr_{1} + Arr_{2} + Arr_{3} = 3 + 1 + 2 = 6$

<br>

##### 합 배열을 이용한 구간 합 계산
$Sum_{3} - Sum_{0} = 13 - 7 = 6$

<br>

로 계산 할 수 있습니다.

따라서, 한번의 합 배열 계산으로 모든 구간합을 $O(1)$의 시간 복잡도로 구할 수 있습니다.